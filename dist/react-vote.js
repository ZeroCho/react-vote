module.exports=function(t){function e(o){if(s[o])return s[o].exports;var r=s[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}}(),i=s(1),l=o(i),u=function(t){function e(){var t,s,o,n;r(this,e);for(var p=arguments.length,i=Array(p),u=0;u<p;u++)i[u]=arguments[u];return s=o=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),o.state={showResult:!1,items:o.props.data?o.props.data.items:[],data:o.props.data,isAdmin:o.props.isAdmin,total:o.props.total,voted:!1,multiple:o.props.multiple,showMessage:!1,errorMessage:!1},o.addItem=function(){var t=o.addInput.value,e=o.state.items;t&&t.trim()&&(e.push({title:t,count:0}),o.setState({items:e}),o.addInput.value="")},o.removeItem=function(t){var e=o.state.items,s=o[t].innerHTML;e=e.filter(function(t){return t.title!==s}),o.setState({items:e})},o.confirmVote=function(){var t=o.state.items,e=o.voteTitle.value,s={title:e,items:t,done:!1};return e&&e.trim()?s.items.length<2?o.setState({showMessage:!0,errorMessage:o.props.errorMessage.notEnoughItems}):(o.setState({data:s,showMessage:!1}),o.props.getData&&o.props.getData(s)):o.setState({showMessage:!0,errorMessage:o.props.errorMessage.noTitle})},o.showResult=function(){o.setState({showResult:!0})},o.showVoting=function(){o.setState({showResult:!1})},o.closeVote=function(){var t=o.state.data;return t.done=!0,o.setState({data:t}),o.props.getData&&o.props.getData(t)},o.upvote=function(t){var e=o.state.items,s=o.state.data;return e[t].count+=1,e[t].voted=!0,s.items=e,o.setState({voted:!0,items:e,data:s}),o.props.getData&&o.props.getData(s)},o.renderItems=function(t){var e=0;return l["default"].createElement("div",null,t.map(function(t){var s=e,r=t.voted?l["default"].createElement("span",{className:o.props.styles.votedText}," ",o.props.text.votedText):(o.state.multiple||!o.state.voted)&&l["default"].createElement("button",{onClick:function(){return o.upvote(s)},className:o.props.styles.voteButton},o.props.text.voteButtonText),a=l["default"].createElement("div",{key:"react-vote-item-"+s,className:o.props.styles.itemWrapper},l["default"].createElement("div",{className:o.props.styles.itemTitle,ref:function(t){o["react-vote-item-"+s]=t}},t.title),o.state.data?r:l["default"].createElement("button",{onClick:function(){return o.removeItem("react-vote-item-"+s)},className:o.props.styles.removeButton},o.props.text.removeButtonText));return e+=1,a}))},o.renderResult=function(t){var e=0,s=t.reduce(function(t,e){return t+e.count},0);return l["default"].createElement("div",null,t.map(function(t){var r=0===s?0:(t.count/s*100).toFixed(2),a=l["default"].createElement("div",{key:"react-vote-result-"+e,className:o.props.styles.itemWrapper},l["default"].createElement("div",{className:o.props.styles.itemTitle,ref:function(t){o["react-vote-result-"+e]=t}},t.title),l["default"].createElement("div",{className:o.props.styles.itemCount},t.count+"("+r+"%)"));return e+=1,a}),o.state.total&&l["default"].createElement("div",null,l["default"].createElement("div",{className:o.props.styles.itemTitle},o.props.text.totalText),l["default"].createElement("div",{className:o.props.styles.itemCount},s)))},n=s,a(o,n)}return n(e,t),p(e,[{key:"componentWillReceiveProps",value:function(t){t.data&&this.setState({data:t.data,items:t.data.items,isAdmin:t.isAdmin})}},{key:"render",value:function(){var t=this,e=l["default"].createElement("div",null,l["default"].createElement("div",{className:this.props.styles.voteTitle},this.state.data&&this.state.data.title),this.renderItems(this.state.items),l["default"].createElement("button",{className:this.props.styles.resultButton,onClick:this.showResult},this.props.text.resultButtonText),this.state.isAdmin&&l["default"].createElement("button",{className:this.props.styles.closeButton,onClick:this.closeVote},this.props.text.closeButtonText)),s=this.state.data&&l["default"].createElement("div",null,l["default"].createElement("div",{className:this.props.styles.voteTitle},this.state.data.title),this.renderResult(this.state.items),!this.state.data.done&&l["default"].createElement("button",{className:this.props.styles.goBackButton,onClick:this.showVoting},this.props.text.goBackButtonText)),o=this.state.data&&(this.state.data.done||this.state.showResult)?s:e;return l["default"].createElement("div",{className:this.props.styles.voteWrapper},this.state.data?o:l["default"].createElement("div",null,l["default"].createElement("input",{className:this.props.styles.titleInput,ref:function(e){t.voteTitle=e},placeholder:this.props.text.titleInputPlaceholder}),this.renderItems(this.state.items),l["default"].createElement("div",{className:this.props.styles.addWrapper},l["default"].createElement("input",{className:this.props.styles.addInput,ref:function(e){t.addInput=e},placeholder:this.props.text.addInputPlaceholder}),l["default"].createElement("button",{className:this.props.styles.addButton,onClick:this.addItem},this.props.text.addButtonText)),this.state.showMessage&&l["default"].createElement("div",{className:this.props.styles.errorMessage},this.state.errorMessage),l["default"].createElement("button",{className:this.props.styles.createButton,onClick:this.confirmVote},this.props.text.createButtonText)))}}]),e}(i.Component);u.propTypes={isAdmin:i.PropTypes.bool,total:i.PropTypes.bool,multiple:i.PropTypes.bool,data:i.PropTypes.shape({title:i.PropTypes.string.required,items:i.PropTypes.arrayOf(i.PropTypes.object).required,done:i.PropTypes.bool.required}),styles:i.PropTypes.shape({voteWrapper:i.PropTypes.string,voteTitle:i.PropTypes.string,titleInput:i.PropTypes.string,addWrapper:i.PropTypes.string,addInput:i.PropTypes.string,addButton:i.PropTypes.string,itemTitle:i.PropTypes.string,itemCount:i.PropTypes.string,itemWrapper:i.PropTypes.string,removeButton:i.PropTypes.string,createButton:i.PropTypes.string,resultButton:i.PropTypes.string,goBackButton:i.PropTypes.string,voteButton:i.PropTypes.string,closeButton:i.PropTypes.string,errorMessage:i.PropTypes.string,votedText:i.PropTypes.string}),getData:i.PropTypes.func,text:i.PropTypes.shape({titleInputPlaceholder:i.PropTypes.string,addInputPlaceholder:i.PropTypes.string,addButtonText:i.PropTypes.string,removeButtonText:i.PropTypes.string,closeButtonText:i.PropTypes.string,createButtonText:i.PropTypes.string,resultButtonText:i.PropTypes.string,goBackButtonText:i.PropTypes.string,voteButtonText:i.PropTypes.string,votedText:i.PropTypes.string,totalText:i.PropTypes.string}),errorMessage:i.PropTypes.shape({notEnoughItems:i.PropTypes.string,noTitle:i.PropTypes.string})},u.defaultProps={isAdmin:!1,multiple:!1,total:!0,text:{addButtonText:"Add",titleInputPlaceholder:"Title of this vote",addInputPlaceholder:"Type title of new option here",removeButtonText:"Ã—",closeButtonText:"Close vote",createButtonText:"Create",resultButtonText:"Show result",goBackButtonText:"Go back to vote",voteButtonText:"Upvote",votedText:"Voted",totalText:"Total"},errorMessage:{notEnoughItems:"Need at least 2 item!",noTitle:"Need a title!"},styles:{}},e["default"]=u},function(t,e){t.exports=require("react")}]);
//# sourceMappingURL=react-vote.js.map